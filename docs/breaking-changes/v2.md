# Breaking Changes in v2

## Overview

Version 2.0 introduces breaking changes to the download action's behavior for accessing public S3 buckets.

## Changes

### Download Action - Public S3 Bucket Access

**Previous Behavior (v1.x):**

- The `--no-sign-request` flag was automatically applied when `aws-access-key-id` or `aws-secret-access-key` inputs were empty
- No explicit control over when to use unsigned requests

**New Behavior (v2.x):**

- The `--no-sign-request` flag is controlled by an explicit `public-bucket` input parameter
- Default value is `false`, meaning signed requests are attempted by default
- Users must explicitly set `public-bucket: true` to access public S3 buckets without authentication

## Migration Guide

### For Public S3 Bucket Downloads

If you were previously downloading from public S3 buckets without providing AWS credentials, you now need to explicitly enable the `public-bucket` option:

**Before (v1.x):**

```yaml
- uses: open-turo/actions-s3-artifact/download@v1
  with:
    s3uri: s3://public-bucket/path/to/file
    # No credentials provided - automatically used --no-sign-request
```

**After (v2.x):**

```yaml
- uses: open-turo/actions-s3-artifact/download@v2
  with:
    s3uri: s3://public-bucket/path/to/file
    public-bucket: true # Explicitly enable for public buckets
```

### For Private S3 Bucket Downloads

No changes required for private buckets with proper authentication:

```yaml
- uses: open-turo/actions-s3-artifact/download@v2
  with:
    s3uri: s3://private-bucket/path/to/file
    aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
    aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
    aws-region: us-east-1
    # public-bucket defaults to false for authenticated requests
```

## Impact

This change provides more explicit control over S3 access patterns and removes ambiguous behavior where the presence or absence of credentials determined the request signing behavior.
